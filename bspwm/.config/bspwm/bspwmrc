#! /bin/sh

[ -p /tmp/.sxhkd ] || mkfifo /tmp/.sxhkd
pgrep -x sxhkd || SXHKD_SHELL=bash sxhkd -s /tmp/.sxhkd -t 10 &

bspc subscribe monitor >> /tmp/monitorinfo &

bspc monitor -d 1 2 3 4 5 6 7 8 9 10

# config

bspc config border_width              1
bspc config window_gap                12
bspc config split_ratio               0.52
bspc config borderless_monocle        false
bspc config gapless_monocle           false
bspc config paddingless_monocle       false
bspc config focus_follows_pointer     true
bspc config pointer_follows_focus     true
bspc config pointer_modifier          mod4 # super
bspc config pointer_action1           move
bspc config pointer_action2           resize_side
bspc config pointer_action3           resize_corner
bspc config click_to_focus            none
bspc config pointer_follows_monitor   true
bspc config ignore_ewmh_focus         false
bspc config center_pseudo_tiled       true
bspc config honor_size_hints          false
bspc config remove_disabled_monitors  false #?
bspc config remove_unplugged_monitors true
bspc config directional_focus_tightness low # test
bspc config initial_polarity first_child



# init

set_wallpaper.sh &

setxkbmap -option caps:swapescape &

pgrep -x polybar || polybar bspwm &
pgrep -x nm-applet || (sleep 0.1; nm-applet) &
pgrep -x redshift || (sleep 0.1; redshift) &
pgrep -x keynav || (sleep 0.9; keynav) &
pgrep -x dunst || dunst &
pgrep -x xautolock || (sleep 10; xautolock -time 42 -locker "$HOME/.local/share/scripts/exit.sh lock") &
pgrep -x udiskie || (sleep 1 && udiskie --use-udisks2 --no-automount --smart-tray) &

xrdb -merge ~/.Xresources &



# rules
bspc rule -a scratchpad-terminal sticky=on state=floating hidden=on
