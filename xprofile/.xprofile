#!/bin/bash

[ -f "$HOME/.profile" ] && source "$HOME/.profile"
[ -f "$HOME/.profile-$(hostname)" ] && source "$HOME/.profile-$(hostname)"

export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=@im=xim

export GTK2_RC_FILES=~/.gtkrc-2.0
export QT_QPA_PLATFORMTHEME=qt5ct

# fix java in bspwm
export _JAVA_AWT_WM_NONREPARENTING=1

export DISPLAY=:0

# reset
setxkbmap ''
setxkbmap -option ''

{ pgrep -x xcape && pkill -x xcape; } >/dev/null 2>&1

setxkbmap us altgr-intl nodeadkeys

# make both shift keys together act like caps lock
# caps lock like ctrl (when pressed in conjunction with another key)
# and like escape on its own
setxkbmap -option shift:both_capslock
setxkbmap -option caps:ctrl_modifier
setxkbmap -option compose:rwin-altgr
setxkbmap -option compose:lwin-altgr
xcape -e 'Caps_Lock=Escape' -t 210

numlockx on
